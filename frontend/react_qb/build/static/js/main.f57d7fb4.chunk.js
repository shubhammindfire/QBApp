(this.webpackJsonpreact_qb=this.webpackJsonpreact_qb||[]).push([[0],{48:function(e,t,a){},49:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),l=a(25),n=a.n(l),s=(a(48),a(49),a(2)),i=a(8),o=a.n(i),d=a(9),b=a(6),u=a(0);var j=function(e){var t=e.label,a=e.placeholder,r=e.type,c=e.onChange;return Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{"data-test":"textfield-label",children:t}),Object(u.jsx)("input",{"data-test":"textfield",className:"block m-auto w-full my-2 px-2 border-gray-400 focus:border-black border-2 leading-10 rounded-md",onChange:c,type:r,placeholder:a})]})},m=a(4),x="SET_LOCAL_AUTH_JWT",h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:x,payload:e}},p="http://localhost:8000",O=p+"/qb/fetch_data_from_qbo",f=p+"/api/user",g=p+"/api/invoices",v=p+"/api/invoices",N=p+"/api/invoices",y=p+"/api/items",w=p+"/api/items",I=p+"/api/customers",E="/login",S="/register",B="/portal",k="/portal/customers",C="/portal/items",A="/portal/invoices",D="/portal/invoice/detail";function R(){var e=JSON.parse(localStorage.getItem("session-jwt"));return null!==e&&e.expiry<(new Date).getTime()}var G=function(e){void 0===localStorage.getItem("isQBOConnected")&&localStorage.setItem("isQBOConnected",!1);var t="true"===localStorage.getItem("isQBOConnected"),a=void 0!==e.location.state&&e.location.state.isSessionExpired,c=Object(m.c)((function(e){return e.localAuthReducer.jwt})),l=Object(m.b)(),n=Object(r.useState)(""),i=Object(s.a)(n,2),x=i[0],p=i[1],O=Object(r.useState)(""),f=Object(s.a)(O,2),g=f[0],v=f[1],N=Object(r.useState)(null),y=Object(s.a)(N,2),w=y[0],I=y[1];return Object(u.jsx)(u.Fragment,{children:!0===t&&null!==c&&!1===R()?Object(u.jsx)(d.a,{to:B}):Object(u.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[a?Object(u.jsx)("p",{className:"text-red-600",children:"Session Expired Login again"}):null,Object(u.jsx)("p",{className:"mt-4 text-4xl",children:"Login"}),Object(u.jsx)("div",{className:"rounded w-96 m-4 bg-gray-50 shadow-lg p-6 align-middle",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.a.post("http://localhost:8000/api/login",{username:x,password:g}).then((function(e){if(200===e.status){l(h(e.data));var t={value:e.data,expiry:(new Date).getTime()+36e5};localStorage.setItem("session-jwt",JSON.stringify(t))}else I(e.message)})).catch((function(e){e.response&&I(e.response.data.message)}))},children:[Object(u.jsx)(j,{label:"Username",placeholder:"Enter username",type:"text",onChange:function(e){p(e.target.value),I(null)}}),Object(u.jsx)(j,{label:"Password",placeholder:"Enter password",type:"password",onChange:function(e){v(e.target.value),I(null)}}),null!==w?Object(u.jsx)("p",{className:"text-red-600",children:w}):null,Object(u.jsx)("button",{type:"submit",className:null===c||""===c?"submitBtn bg-blue-600":"submitBtn bg-blue-200",disabled:null!==c&&""!==c,children:"Login"}),null!==c?Object(u.jsx)("p",{className:"text-green-600",children:"Login successfull, now connect to Quickbooks"}):null,Object(u.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),o.a.get("http://localhost:8000/qb/connect",{headers:{Authorization:"Bearer ".concat(c)}}).then((function(e){200===e.status&&(window.location.href=e.data.authUrl)}))},className:null===c||""===c?"submitBtn bg-blue-200":"submitBtn bg-blue-600",disabled:null===c||""===c,children:"Connect to QuickBooks"})]})}),Object(u.jsxs)("div",{children:["Not a registered user?",Object(u.jsx)(b.b,{to:S,children:Object(u.jsxs)("p",{className:"inline text-blue-600",children:[" ","Register Instead"]})})]})]})})};var T=function(){var e=Object(m.c)((function(e){return e.localAuthReducer.jwt})),t=Object(d.g)(),a=Object(r.useState)(""),c=Object(s.a)(a,2),l=c[0],n=c[1],i=Object(r.useState)(""),x=Object(s.a)(i,2),h=x[0],p=x[1],O=Object(r.useState)(""),f=Object(s.a)(O,2),g=f[0],v=f[1],N=Object(r.useState)(null),y=Object(s.a)(N,2),w=y[0],I=y[1],S=Object(r.useState)(null),k=Object(s.a)(S,2),C=k[0],A=k[1],D=Object(r.useState)(null),G=Object(s.a)(D,2),T=G[0],_=G[1],F=Object(r.useState)(null),P=Object(s.a)(F,2),V=P[0],Q=P[1];return Object(u.jsx)(u.Fragment,{children:null!==e&&!1===R()?Object(u.jsx)(d.a,{to:B}):Object(u.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(u.jsx)("p",{className:"mt-4 text-4xl",children:"Register"}),Object(u.jsx)("div",{className:"rounded w-96 m-4 bg-gray-50 shadow-lg p-6 align-middle",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.a.post("http://localhost:8000/api/users",{username:l,password:h,realmId:g}).then((function(e){201===e.status&&(Q("User registered successfully"),setTimeout((function(){t.push({LOGIN_ROUTE:E})}),1500))})).catch((function(e){e.response&&e.response.data.violations.forEach((function(e){"username"===e.propertyPath&&I(e.message),"password"===e.propertyPath&&A(e.message),"realmId"===e.propertyPath&&_(e.message)}))}))},children:[Object(u.jsx)(j,{label:"Username",placeholder:"Enter username",type:"text",onChange:function(e){I(null),n(e.target.value)}}),null!==w?Object(u.jsx)("p",{className:"text-red-600",children:w}):null,Object(u.jsx)(j,{label:"Password",placeholder:"Enter password",type:"password",onChange:function(e){A(null),p(e.target.value)}}),null!==C?Object(u.jsx)("p",{className:"text-red-600",children:C}):null,Object(u.jsx)(j,{label:"RealmId",placeholder:"Enter RealmId",type:"text",onChange:function(e){_(null),v(e.target.value)}}),null!==T?Object(u.jsx)("p",{className:"text-red-600",children:T}):null,Object(u.jsx)("button",{type:"submit",className:"submitBtn bg-blue-600",children:"Register"}),null!==V?Object(u.jsx)("p",{className:"text-green-600 text-center my-2",children:V}):null]})}),Object(u.jsxs)("div",{children:["Already registered?",Object(u.jsx)(b.b,{to:E,children:Object(u.jsxs)("p",{className:"inline text-blue-600",children:[" ","Login Instead"]})})]})]})})},_=a(12),F=a.n(_),P=a(18),V=a(11),Q=a(10);var L=function(e){var t=e.setShowErrorModal,a=e.type,r=void 0===a?"ERROR":a,c=e.message;return Object(u.jsx)("div",{className:"w-96 ".concat("CREATE_OR_EDIT_INVOICE_ERROR"===r?"h-50":"h-40"," fixed top-1/3 left-1/3 bg-white border border-black rounded-lg"),children:Object(u.jsxs)("div",{className:"relative p-8 w-full max-w-md m-auto flex-col flex",children:[Object(u.jsxs)("div",{className:"text-lg",children:[Object(u.jsx)(Q.a,{icon:V.c,color:"#FFA500",className:"mr-2"}),c]}),"SESSION_EXPIRED"===r?Object(u.jsx)(b.b,{to:{pathname:E,state:{isSessionExpired:!0}},children:Object(u.jsx)("p",{className:"submitBtn text-center bg-blue-600",children:"Go to login"})}):Object(u.jsx)("button",{className:"submitBtn text-center bg-blue-600",onClick:function(e){e.preventDefault(),t(!1)},children:"Close"})]})})};function M(){var e=Object(m.b)(),t=c.a.useState("hidden"),a=Object(s.a)(t,2),r=a[0],l=a[1];return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("nav",{className:"md:left-0 md:block md:fixed md:top-0 md:bottom-0 md:overflow-y-auto md:flex-row md:flex-nowrap md:overflow-hidden shadow-xl bg-white flex flex-wrap items-center justify-between relative md:w-64 z-10 py-4 px-6",children:Object(u.jsxs)("div",{className:"md:flex-col md:items-stretch md:min-h-full md:flex-nowrap px-0 flex flex-wrap items-center justify-between w-full mx-auto",children:[Object(u.jsx)("button",{className:"cursor-pointer text-black opacity-50 md:hidden px-3 py-1 text-xl leading-none bg-transparent rounded border border-solid border-transparent",type:"button",onClick:function(){return l("bg-white m-2 py-3 px-6")},children:Object(u.jsx)(Q.a,{icon:V.a})}),Object(u.jsx)(b.b,{className:"md:block text-left md:pb-2 text-blueGray-600 mr-0 inline-block whitespace-nowrap text-sm uppercase font-bold p-4 px-0",to:B,children:"QBO Integration"}),Object(u.jsxs)("div",{className:"md:flex md:flex-col md:items-stretch md:opacity-100 md:relative md:mt-4 md:shadow-none shadow absolute top-0 left-0 right-0 z-40 overflow-y-auto overflow-x-hidden h-auto items-center flex-1 rounded "+r,children:[Object(u.jsx)("div",{className:"md:min-w-full md:hidden block pb-4 mb-4 border-b border-solid border-blueGray-200",children:Object(u.jsxs)("div",{className:"flex flex-wrap",children:[Object(u.jsx)("div",{className:"w-6/12",children:Object(u.jsx)(b.b,{className:"md:block text-left md:pb-2 text-blueGray-600 mr-0 inline-block whitespace-nowrap text-sm uppercase font-bold p-4 px-0",to:"/",children:"QBO Integration"})}),Object(u.jsx)("div",{className:"w-6/12 flex justify-end",children:Object(u.jsx)("button",{type:"button",className:"cursor-pointer text-black opacity-50 md:hidden px-3 py-1 text-xl leading-none bg-transparent rounded border border-solid border-transparent",onClick:function(){return l("hidden")},children:Object(u.jsx)(Q.a,{icon:V.k})})})]})}),Object(u.jsx)("h6",{className:"md:min-w-full text-blueGray-500 text-xs uppercase font-bold block pt-1 pb-4 no-underline",children:"QBO Pages"}),Object(u.jsxs)("ul",{className:"md:flex-col md:min-w-full flex flex-col list-none",children:[Object(u.jsx)("li",{className:"items-center",children:Object(u.jsxs)(b.b,{className:"text-xs uppercase py-3 font-bold block "+(-1!==window.location.href.indexOf(k)?"text-lightBlue-500 hover:text-lightBlue-600":"text-blueGray-700 hover:text-blueGray-500"),to:k,children:[Object(u.jsx)(Q.a,{icon:V.m,className:"mr-3"}),"Customers"]})}),Object(u.jsx)("li",{className:"items-center",children:Object(u.jsxs)(b.b,{className:"text-xs uppercase py-3 font-bold block "+(-1!==window.location.href.indexOf(C)?"text-lightBlue-500 hover:text-lightBlue-600":"text-blueGray-700 hover:text-blueGray-500"),to:C,children:[Object(u.jsx)(Q.a,{icon:V.f,className:"mr-3"}),"Items"]})}),Object(u.jsx)("li",{className:"items-center",children:Object(u.jsxs)(b.b,{className:"text-xs uppercase py-3 font-bold block "+(-1!==window.location.href.indexOf(A)?"text-lightBlue-500 hover:text-lightBlue-600":"text-blueGray-700 hover:text-blueGray-500"),to:A,children:[Object(u.jsx)(Q.a,{icon:V.g,className:"mr-3"}),"Invoices"]})})]}),Object(u.jsx)("hr",{className:"my-4 md:min-w-full"}),Object(u.jsx)("ul",{className:"md:flex-col md:min-w-full flex flex-col list-none md:mb-4",children:Object(u.jsx)("li",{className:"items-center",children:Object(u.jsxs)(b.b,{className:"text-blueGray-700 hover:text-blueGray-500 text-xs uppercase py-3 font-bold block",to:E,onClick:function(t){t.preventDefault(),e(h(null)),localStorage.removeItem("session-jwt"),localStorage.removeItem("isQBOConnected")},children:[Object(u.jsx)(Q.a,{icon:V.j,className:"mr-3",color:"#FF0000"}),"Logout"]})})})]})]})})})}var q=function(e){var t=e.setShowSuccessModal,a=e.type,r=e.message;return Object(u.jsx)("div",{className:"w-96 h-40 fixed top-1/3 left-1/3 bg-white border border-black rounded-lg",children:Object(u.jsxs)("div",{className:"relative p-8 w-full max-w-md m-auto flex-col flex",children:[Object(u.jsxs)("div",{"data-test":"modal-message",className:"text-lg",children:[Object(u.jsx)(Q.a,{icon:V.b,color:"#228B22",className:"mr-2"}),r]}),Object(u.jsx)("button",{"data-test":"modal-button",className:"submitBtn text-center bg-blue-600",onClick:function(e){e.preventDefault(),"SaveAndClose"!==a&&"Close"!==a||t(!1)},children:"Close"})]})})},z=a(41),U=a.n(z);var $=function(){return Object(u.jsx)("div",{className:"w-96 h-40 fixed top-1/3 left-1/2 bg-gray-400 rounded-lg",children:Object(u.jsxs)("div",{className:"relative p-8 w-full max-w-md m-auto flex-col flex",children:[Object(u.jsx)("p",{className:"text-white text-lg",children:"Please wait.."}),Object(u.jsx)(U.a,{type:"Watch",color:"#FFFFFF",height:80,width:80})]})})};var X=function(){var e=Object(m.c)((function(e){return e.localAuthReducer.jwt})),t=Object(r.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],n=Object(r.useState)(!1),i=Object(s.a)(n,2),b=i[0],j=i[1],x=Object(r.useState)(!1),h=Object(s.a)(x,2),p=h[0],g=h[1],v=Object(r.useState)("ERROR"),N=Object(s.a)(v,2),y=N[0],w=N[1];function I(){return(I=Object(P.a)(F.a.mark((function t(){var a;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(!0),t.next=4,o.a.get(f,{headers:{Authorization:"Bearer ".concat(e)}});case 4:return a=t.sent,t.t0=o.a,t.t1=O,t.t2="/",t.next=10,a.data.realmId;case 10:return t.t3=t.sent,t.t4=t.t2.concat.call(t.t2,t.t3),t.t5=t.t1+t.t4,t.next=15,t.t0.get.call(t.t0,t.t5);case 15:204===t.sent.status?(l(!1),j(!0)):(l(!1),g(!0)),t.next=24;break;case 19:t.prev=19,t.t6=t.catch(0),l(!1),401===t.t6.response.data.code&&w("SESSION_EXPIRED"),g(!0);case 24:case"end":return t.stop()}}),t,null,[[0,19]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){null!==e&&!1===R()&&localStorage.setItem("isQBOConnected",!0)}),[]),Object(u.jsx)(u.Fragment,{children:null===e?Object(u.jsx)(d.a,{to:E}):Object(u.jsxs)("div",{children:[Object(u.jsx)(M,{}),Object(u.jsxs)("div",{className:"md:ml-64 mt-16 py-4 text-3xl text-center bg-blueGray-100",children:[Object(u.jsx)("p",{children:"Welcome to the Quick Books Integration portal"}),Object(u.jsxs)("div",{className:"text-base mx-3",children:[Object(u.jsx)("p",{className:"mt-2 lg:mx-52",children:"QuickBooks is an accounting software package developed and marketed by Intuit. QuickBooks products are geared mainly toward small and medium-sized businesses and offer on-premises accounting applications."}),Object(u.jsxs)("div",{className:"m-3 lg:mx-72 text-left",children:[Object(u.jsx)("p",{children:"This application integrates with QuickBooks and allows the user to do the following:"}),Object(u.jsxs)("ul",{className:"ml-4",children:[Object(u.jsx)("li",{className:"list-disc",children:"Connect to their account in Quickbooks"}),Object(u.jsx)("li",{className:"list-disc",children:"View their Customers"}),Object(u.jsx)("li",{className:"list-disc",children:"View their Items"}),Object(u.jsx)("li",{className:"list-disc",children:"View, Create, Edit and Delete their Invoices"})]})]}),Object(u.jsx)("p",{className:"m-3",children:"All the data and the changes made to them are in sync the QuickBooks Online(QBO) platform"}),c?Object(u.jsx)($,{}):null,b?Object(u.jsx)(q,{setShowSuccessModal:j,type:"Close",message:"Fetched all data successfully"}):null,p?Object(u.jsx)(L,{type:y}):null,Object(u.jsx)("button",{className:"roundedPillBtn bg-green-600 mx-auto",onClick:function(){return I.apply(this,arguments)},children:"Fetch data from QuickBooks"})]})]})]})})};function J(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=[];if(void 0!==e)for(var r=0;r<e.length;r++)a.push(Object(u.jsxs)("tr",{className:"text-md",children:[Object(u.jsx)("th",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4 text-left flex items-center",children:"Customers"===t?e[r].displayName:e[r].name}),Object(u.jsx)("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4",children:"Customers"===t?"null"!==e[r].companyName?e[r].companyName:"-":e[r].type}),Object(u.jsx)("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4",children:"Customers"===t?"null"!==e[r].email?e[r].email:"-":"null"!==e[r].description?e[r].description:"-"}),Object(u.jsx)("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4",children:"Customers"===t?"null"!==e[r].billingAddress?e[r].billingAddress:"-":"$ ".concat(e[r].salesPrice.toFixed(2))}),Object(u.jsx)("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4",children:"Customers"===t?"null"!==e[r].phoneNumber?e[r].phoneNumber:"-":"$ ".concat(e[r].costPrice.toFixed(2))}),Object(u.jsx)("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4",children:"Customers"===t?"$ ".concat(e[r].openBalance.toFixed(2)):e[r].quantity})]},e[r].id));return a}var H=function(e){var t=e.color,a=void 0===t?"light":t,r=e.title,c=e.data;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded "+("light"===a?"bg-white":"bg-lightBlue-900 text-white"),children:[Object(u.jsx)("div",{className:"relative w-full p-5 max-w-full flex justify-between",children:Object(u.jsx)("h3",{className:"font-semibold text-xl "+("light"===a?"text-blueGray-700":"text-white"),children:r})}),Object(u.jsx)("div",{className:"block w-full overflow-x-auto",children:Object(u.jsxs)("table",{className:"items-center w-full bg-transparent border-collapse",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===a?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Customers"===r?"Display Name":"Name"}),Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===a?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Customers"===r?"Company Name":"Type"}),Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===a?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Customers"===r?"Email":"Description"}),Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===a?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Customers"===r?"Billing Address":"Sales Price"}),Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===a?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Customers"===r?"Phone Number":"Cost Price"}),Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===a?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Customers"===r?"Open Balance":"Quantity"})]})}),Object(u.jsx)("tbody",{children:J("light",c,r)})]})})]})})},W="ADD_ALL_CUSTOMERS",Y="REMOVE_ALL_CUSTOMERS";var K=function(){var e=Object(m.c)((function(e){return e.localAuthReducer.jwt})),t=Object(m.c)((function(e){return e.customerReducer.customers})),a=Object(m.b)(),c=Object(r.useState)(!1),l=Object(s.a)(c,2),n=l[0],i=l[1];return Object(r.useEffect)((function(){return o.a.get(I,{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){a(function(){return{type:W,payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}(e.data))})).catch((function(e){401===e.response.data.code&&i(!0)})),function(){a({type:Y})}}),[e,a]),Object(u.jsx)(u.Fragment,{children:null===e?Object(u.jsx)(d.a,{to:E}):n?Object(u.jsx)(L,{type:"SESSION_EXPIRED"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"relative md:ml-64 bg-blueGray-100 py-10",children:null===t||""===t?Object(u.jsxs)("div",{className:"text-center",children:[Object(u.jsx)("p",{className:"mb-4 text-lg",children:'No customer data available. Please ensure to click on "Fetch data from QuickBooks" button in the portal home page.'}),Object(u.jsx)(b.b,{to:B,className:"rounded-full bg-green-600 text-white px-4 py-2",children:"Go to Portal Home page"})]}):Object(u.jsx)(H,{title:"Customers",data:t})})]})})},Z="ADD_ALL_INVOICES",ee="REMOVE_ALL_INVOICES",te="REMOVE_INVOICE_BY_INDEX",ae="ADD_CURRENT_INVOICE",re="ADD_CURRENT_INVOICE_ITEMS",ce="DELETE_CURRENT_INVOICE_ITEM_BY_INDEX",le="REMOVE_CURRENT_INVOICE",ne="REMOVE_CURRENT_INVOICE_ITEMS",se=function(e){return{type:te,payload:e}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ae,payload:e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:re,payload:e}};function de(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,l=[];function n(e,l,n){e.preventDefault(),r(!0),o.a.delete(g+"/".concat(l),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){r(!1),204===e.status&&c(se(n))})).catch((function(e){r(!1),a(!0)}))}if(void 0!==e)for(var s=function(t){var a=!1,r=e[t].dueDate,c=new Date(r).getTime(),s=(new Date).getTime()-c,i=Math.floor(Math.abs(s)/1e3/60/60/24);0!==e[t].balance&&(a=s>0),l.push(Object(u.jsxs)("tr",{className:"text-md",children:[Object(u.jsx)("th",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4 text-left flex items-center",children:e[t].invoiceDate.split("T")[0].toString().split("-").reverse().join("-")}),Object(u.jsx)("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4",children:e[t].invoiceNumber}),Object(u.jsx)("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4",children:e[t].customerName}),Object(u.jsxs)("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4",children:["$",e[t].amount]}),Object(u.jsxs)("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4",children:[0===e[t].balance?null:a?Object(u.jsx)(Q.a,{icon:V.c,color:"#FFA500",className:"mr-2"}):Object(u.jsx)(Q.a,{icon:V.b,color:"#228B22",className:"mr-2"}),0===e[t].balance?"Deposited":a?"Overdue ".concat(i," days"):"Due in ".concat(i," days")]}),Object(u.jsx)("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4",children:0===e[t].balance?Object(u.jsxs)(b.b,{to:{pathname:D,state:{invoiceTableId:e[t].id,operation:"View"}},children:[Object(u.jsx)(Q.a,{icon:V.d,color:"#32A6E9",className:"mr-2"}),"View"]}):Object(u.jsxs)(b.b,{to:{pathname:D,state:{invoiceTableId:e[t].id,operation:"Edit"}},children:[Object(u.jsx)(Q.a,{icon:V.h,color:"#32A6E9",className:"mr-2"}),"Edit"]})}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{className:"ml-4",onClick:function(a){return n(a,e[t].id,t)},children:Object(u.jsx)(Q.a,{icon:V.l,color:"#FF0000"})})})]},e[t].invoiceNumber))},i=0;i<e.length;i++)s(i);return l}var be=function(e){var t=Object(m.c)((function(e){return e.localAuthReducer.jwt})),a=Object(m.b)(),c=e.color,l=void 0===c?"light":c,n=e.title,i=e.invoices,o=Object(r.useState)(!1),d=Object(s.a)(o,2),j=d[0],x=d[1],h=Object(r.useState)(!1),p=Object(s.a)(h,2),O=p[0],f=p[1];return Object(u.jsx)(u.Fragment,{children:j?Object(u.jsx)(L,{setShowErrorModal:x,type:"INVOICE_DELETE_ERROR",message:"Error in deleting the invoice"}):Object(u.jsxs)("div",{className:"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded "+("light"===l?"bg-white":"bg-lightBlue-900 text-white"),children:[Object(u.jsxs)("div",{className:"relative w-full p-5 max-w-full flex justify-between",children:[Object(u.jsx)("h3",{className:"font-semibold text-xl "+("light"===l?"text-blueGray-700":"text-white"),children:n}),Object(u.jsx)(b.b,{to:{pathname:D,state:{operation:"Create"}},className:"rounded-full bg-green-600 text-white px-4 py-2",children:"Create Invoice"})]}),O?Object(u.jsx)($,{}):null,Object(u.jsx)("div",{className:"block w-full overflow-x-auto",children:Object(u.jsxs)("table",{className:"items-center w-full bg-transparent border-collapse",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===l?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Date"}),Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===l?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"No."}),Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===l?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Customer"}),Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===l?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Amount"}),Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===l?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Status"}),Object(u.jsx)("th",{className:"px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===l?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Action"}),Object(u.jsx)("th",{className:"align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left "+("light"===l?"bg-blueGray-50 text-blueGray-500 border-blueGray-100":"bg-lightBlue-800 text-lightBlue-300 border-lightBlue-700"),children:"Delete"})]})}),Object(u.jsx)("tbody",{children:de("light",i,t,x,f,a)})]})})]})})};var ue=function(){var e=Object(m.c)((function(e){return e.localAuthReducer.jwt})),t=Object(m.c)((function(e){return e.invoiceReducer.invoices})),a=Object(m.b)(),c=Object(r.useState)(!1),l=Object(s.a)(c,2),n=l[0],i=l[1];return Object(r.useEffect)((function(){return o.a.get("http://localhost:8000/api/invoices",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){a(function(){return{type:Z,payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}(e.data)),a({type:le}),a({type:ne})})).catch((function(e){401===e.response.data.code&&i(!0)})),function(){a({type:ee})}}),[]),Object(u.jsx)(u.Fragment,{children:null===e?Object(u.jsx)(d.a,{to:E}):n?Object(u.jsx)(L,{type:"SESSION_EXPIRED"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"relative md:ml-64 bg-blueGray-100 py-10",children:null===t||""===t?Object(u.jsxs)("div",{className:"text-center",children:[Object(u.jsx)("p",{className:"mb-4 text-lg",children:'No invoice data available. Please ensure to click on "Fetch data from QuickBooks" button in the portal home page.'}),Object(u.jsx)(b.b,{to:B,className:"rounded-full bg-green-600 text-white px-4 py-2",children:"Go to Portal Home page"})]}):Object(u.jsx)(be,{title:"Invoices",invoices:t})})]})})},je="ADD_ALL_ITEMS",me="REMOVE_ALL_ITEMS";var xe=function(){var e=Object(m.c)((function(e){return e.localAuthReducer.jwt})),t=Object(m.c)((function(e){return e.itemReducer.items})),a=Object(m.b)(),c=Object(r.useState)(!1),l=Object(s.a)(c,2),n=l[0],i=l[1];return Object(r.useEffect)((function(){return o.a.get(y,{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){a(function(){return{type:je,payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}(e.data))})).catch((function(e){401===e.response.data.code&&i(!0)})),function(){a({type:me})}}),[e,a]),Object(u.jsx)(u.Fragment,{children:null===e?Object(u.jsx)(d.a,{to:E}):n?Object(u.jsx)(L,{type:"SESSION_EXPIRED"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"relative md:ml-64 bg-blueGray-100 py-10",children:null===t||""===t?Object(u.jsxs)("div",{className:"text-center",children:[Object(u.jsx)("p",{className:"mb-4 text-lg",children:'No item data available. Please ensure to click on "Fetch data from QuickBooks" button in the portal home page.'}),Object(u.jsx)(b.b,{to:B,className:"rounded-full bg-green-600 text-white px-4 py-2",children:"Go to Portal Home page"})]}):Object(u.jsx)(H,{title:"Items",data:t})})]})})},he=a(19);function pe(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(P.a)(F.a.mark((function e(t,a){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get(w+"/".concat(a),{headers:{Authorization:"Bearer ".concat(t)}});case 3:return r=e.sent,e.abrupt("return",{success:!0,data:r.data.qBOId});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{success:!1,data:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function fe(){return(fe=Object(P.a)(F.a.mark((function e(t,a,r,c,l,n,s){var i,d,b,u,j;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],d=0;case 2:if(!(d<s.length)){e.next=24;break}return b=null,e.next=6,pe(t,s[d].itemTableId);case 6:if(!1!==(u=e.sent).success){e.next=9;break}return e.abrupt("continue",21);case 9:return b=u.data,e.t0=i,e.t1=s[d].itemDescription,e.t2=s[d].itemAmount,e.next=15,b;case 15:e.t3=e.sent,e.t4=s[d].itemName,e.t5=s[d].rate,e.t6=s[d].quantity,e.t7={description:e.t1,amount:e.t2,itemQBOId:e.t3,name:e.t4,costPrice:e.t5,quantity:e.t6},e.t0.push.call(e.t0,e.t7);case 21:d++,e.next=2;break;case 24:return j={invoiceDate:a,dueDate:r,customerQBOId:c,totalAmount:l,balance:n,invoiceItems:i},e.prev=25,e.next=28,o.a.post(v+"/",j,{headers:{Authorization:"Bearer ".concat(t)}});case 28:if(201!==e.sent.status){e.next=31;break}return e.abrupt("return",!0);case 31:return e.abrupt("return",!1);case 34:return e.prev=34,e.t8=e.catch(25),e.abrupt("return",!1);case 37:case"end":return e.stop()}}),e,null,[[25,34]])})))).apply(this,arguments)}var ge=function(e,t,a,r,c,l,n){return fe.apply(this,arguments)};var ve=function(e,t){var a=null;if(e.forEach((function(e){e.displayName===t&&(a=e.qBOId)})),null!==a)return a;throw Error("Customer Id not found")};var Ne=function(e){var t,a,c,l,n,i=e.invoiceItem,o=e.items,d=e.operation,b=e.updateItemsCallback,j=e.deleteItemCallback,m=e.index,x=Object(r.useState)(null!==(t=i.itemName)&&void 0!==t?t:""),h=Object(s.a)(x,2),p=h[0],O=h[1],f=Object(r.useState)(null!==(a=i.itemDescription)&&void 0!==a?a:""),g=Object(s.a)(f,2),v=g[0],N=g[1],y=Object(r.useState)(null!==(c=i.quantity)&&void 0!==c?c:0),w=Object(s.a)(y,2),I=w[0],E=w[1],S=Object(r.useState)(null!==(l=i.rate)&&void 0!==l?l:0),B=Object(s.a)(S,2),k=B[0],C=B[1],A=Object(r.useState)(null!==(n=i.itemAmount)&&void 0!==n?n:0),D=Object(s.a)(A,2),R=D[0],G=D[1],T=[],_=i;function F(e,t){if(e.preventDefault(),"itemName"===t){if(O(e.target.value),_.itemName=e.target.value,T.includes(e.target.value))for(var a=0;a<o.length;a++)if(o[a].name===e.target.value){_.itemTableId=o[a].id,N(o[a].description),_.itemDescription=o[a].description,E(1),_.quantity=1,C(o[a].costPrice),_.rate=o[a].costPrice,G(1*o[a].costPrice),_.itemAmount=o[a].costPrice,b("Edit",_,m);break}}else"quantity"===t&&(E(e.target.value),_.quantity=parseInt(e.target.value),G(e.target.value*k),_.itemAmount=e.target.value*k,b("Edit",_,m))}return Object(u.jsxs)("tr",{className:"text-center hover:bg-gray-100",children:[Object(u.jsx)("td",{className:"border-r-2 border-t-2",children:m+1}),Object(u.jsxs)("td",{className:"border-r-2 border-t-2",children:[Object(u.jsx)("input",{list:"invoiceItemNames",className:"inline p-2 border border-black xs:w-full",placeholder:"Select an item",value:p,disabled:"View"===d,onChange:function(e){return F(e,"itemName")}}),Object(u.jsx)("datalist",{id:"invoiceItemNames",children:function(){var e=[];if(void 0!==o)for(var t=0;t<o.length;t++)e.push(Object(u.jsx)("option",{value:o[t].name},o[t].name)),T.push(o[t].name);return e}()})]}),Object(u.jsx)("td",{className:"border-r-2 border-t-2",children:v}),Object(u.jsx)("td",{className:"border-r-2 border-t-2",children:Object(u.jsx)("input",{type:"text",className:"block xs:w-full",value:I,disabled:"View"===d,onChange:function(e){return F(e,"quantity")}})}),Object(u.jsx)("td",{className:"border-r-2 border-t-2",children:k}),Object(u.jsx)("td",{className:"border-r-2 border-t-2",children:R}),Object(u.jsx)("td",{className:"border-t-2",children:Object(u.jsx)("button",{onClick:function(e){return function(e){e.preventDefault(),j(m)}(e)},disabled:"View"===d,children:Object(u.jsx)(Q.a,{icon:V.l,color:"#696969"})})})]})};function ye(e,t){return we.apply(this,arguments)}function we(){return(we=Object(P.a)(F.a.mark((function e(t,a){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get(w+"/".concat(a),{headers:{Authorization:"Bearer ".concat(t)}});case 3:return r=e.sent,e.abrupt("return",{success:!0,data:r.data.qBOId});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{success:!1,data:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Ie(){return(Ie=Object(P.a)(F.a.mark((function e(t,a,r,c,l,n,s,i){var d,b,u,j,m,x;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d=[],b=0;case 2:if(!(b<i.length)){e.next=25;break}return u=null,j=void 0===i[b].fKItems?i[b].itemTableId:i[b].fKItems,e.next=7,ye(t,j);case 7:if(!1!==(m=e.sent).success){e.next=10;break}return e.abrupt("continue",22);case 10:return u=m.data,e.t0=d,e.t1=i[b].itemDescription,e.t2=i[b].itemAmount,e.next=16,u;case 16:e.t3=e.sent,e.t4=i[b].itemName,e.t5=i[b].rate,e.t6=i[b].quantity,e.t7={description:e.t1,amount:e.t2,itemQBOId:e.t3,name:e.t4,costPrice:e.t5,quantity:e.t6},e.t0.push.call(e.t0,e.t7);case 22:b++,e.next=2;break;case 25:return x={invoiceDate:r,dueDate:c,customerQBOId:l,totalAmount:n,balance:s,invoiceItems:d},e.prev=26,e.next=29,o.a.patch(N+"/".concat(a),x,{headers:{Authorization:"Bearer ".concat(t)}});case 29:if(200!==e.sent.status){e.next=32;break}return e.abrupt("return",!0);case 32:return e.abrupt("return",!1);case 35:return e.prev=35,e.t8=e.catch(26),e.abrupt("return",!1);case 38:case"end":return e.stop()}}),e,null,[[26,35]])})))).apply(this,arguments)}var Ee=function(e,t,a,r,c,l,n,s){return Ie.apply(this,arguments)};var Se=function(e){var t=Object(m.b)(),a=Object(d.g)(),c=Object(m.c)((function(e){return{currentInvoiceItems:e.invoiceReducer.currentInvoiceItems,currentInvoice:e.invoiceReducer.currentInvoice}})),l=Object(m.c)((function(e){return e.localAuthReducer.jwt})),n=void 0!==e.location.state?e.location.state.invoiceTableId:null,i=void 0!==e.location.state?e.location.state.operation:"View",j=Object(r.useState)({}),x=Object(s.a)(j,2),h=x[0],p=x[1],O=Object(r.useState)([]),f=Object(s.a)(O,2),g=f[0],v=f[1],N=Object(r.useState)([]),w=Object(s.a)(N,2),S=w[0],B=w[1],k=Object(r.useState)([]),C=Object(s.a)(k,2),D=C[0],R=C[1],G=Object(r.useState)(""),T=Object(s.a)(G,2),_=T[0],M=T[1],z=Object(r.useState)(""),U=Object(s.a)(z,2),X=U[0],J=U[1],H=Object(r.useState)(0),W=Object(s.a)(H,2),Y=W[0],K=W[1],Z=Object(r.useState)(""),ee=Object(s.a)(Z,2),te=ee[0],ae=ee[1],re=Object(r.useState)(""),le=Object(s.a)(re,2),ne=le[0],se=le[1],de=Object(r.useState)(""),be=Object(s.a)(de,2),ue=be[0],je=be[1],me=Object(r.useState)(0),xe=Object(s.a)(me,2),pe=xe[0],Oe=xe[1],fe=Object(r.useState)(0),ye=Object(s.a)(fe,2),we=ye[0],Ie=(ye[1],Object(r.useState)(null)),Se=Object(s.a)(Ie,2),Be=Se[0],ke=Se[1],Ce=Object(r.useState)(null),Ae=Object(s.a)(Ce,2),De=Ae[0],Re=Ae[1],Ge=Object(r.useState)(null),Te=Object(s.a)(Ge,2),_e=Te[0],Fe=Te[1],Pe=Object(r.useState)(null),Ve=Object(s.a)(Pe,2),Qe=Ve[0],Le=Ve[1],Me=Object(r.useState)(null),qe=Object(s.a)(Me,2),ze=qe[0],Ue=qe[1],$e=Object(r.useState)(!1),Xe=Object(s.a)($e,2),Je=Xe[0],He=Xe[1],We=Object(r.useState)(!1),Ye=Object(s.a)(We,2),Ke=Ye[0],Ze=Ye[1],et=Object(r.useState)(!1),tt=Object(s.a)(et,2),at=tt[0],rt=tt[1],ct=[];function lt(e,a){e.preventDefault();var r=c.currentInvoice;if("customerName"===a){if(ke(null),M(e.target.value),r.customerName=e.target.value,ct.includes(e.target.value))for(var l=0;l<S.length;l++)if(S[l].displayName===e.target.value){J(S[l].email),ae(S[l].billingAddress),r.customerEmail=S[l].email,r.billingAddress=S[l].billingAddress;break}}else"customerEmail"===a?(J(e.target.value),r.customerEmail=e.target.value):"billingAddress"===a?(ae(e.target.value),r.billingAddress=e.target.value):"invoiceDate"===a?(Re(""),je(e.target.value),r.invoiceDate=e.target.value):"dueDate"===a&&(Fe(""),se(e.target.value),r.dueDate=e.target.value);p(r),t(ie(r))}function nt(){return""===_?(ke("Please enter a customer name"),!1):!1===function(e,t){return t.includes(e)}(_,ct)?(ke("Please select customer name from the list provided"),!1):""===ue?(Re("Please enter an invoice date"),!1):"Create"===i&&!1===function(e){return Date.parse(e)>(new Date).getTime()}(ue)?(Re("Please select a proper invoice date"),!1):""===ne?(Fe("Please enter a due date"),!1):!1===function(e,t){return Date.parse(t)>Date.parse(e)}(ue,ne)?(Fe("Please select a proper due date"),!1):pe<=0?(Le("Please select items to increase total amount above zero"),!1):!1===function(e){for(var t=0;t<e.length;t++)if(null===e.itemName||""===e.itemName)return!1;return!0}(c.currentInvoiceItems)?(Ue("Please fill item name for every item added"),!1):!1===function(e,t){var a=[];if(void 0!==t)for(var r=0;r<t.length;r++)a.push(t[r].name);for(var c=0;c<e.length;c++)if(!a.includes(e[c].itemName))return!1;return!0}(c.currentInvoiceItems,D)?(Ue("Please select item name from the list provided"),!1):!1!==function(e){for(var t=0;t<e.length;t++)if(null===e[t].quantity||0===e[t].quantity)return!1;return!0}(c.currentInvoiceItems)||(Ue("Please fill quantity for every item added"),!1)}function st(){return(st=Object(P.a)(F.a.mark((function e(t){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Ue(null),!0!==nt()){e.next=16;break}if(r=!1,He(!0),"Create"!==i){e.next=11;break}return e.next=8,ge(l,ue,ne,ve(S,_),pe,Y,c.currentInvoiceItems);case 8:r=e.sent,e.next=15;break;case 11:if("Edit"!==i){e.next=15;break}return e.next=14,Ee(l,h.id,ue,ne,ve(S,_),pe,Y,c.currentInvoiceItems);case 14:r=e.sent;case 15:r?(He(!1),Ze(!0),setTimeout((function(){a.push(A)}),2e3)):(He(!1),rt(!0));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){"Create"!==i&&o.a.get("http://localhost:8000/api/invoices"+"/".concat(n),{headers:{Authorization:"Bearer ".concat(l)}}).then((function(e){t(ie(e.data.invoice)),p(e.data.invoice),t(oe(e.data.invoiceItems)),v(e.data.invoiceItems),M(e.data.invoice.customerName),J(e.data.invoice.customerEmail),K(e.data.invoice.balance),Oe(e.data.invoice.amount),ae(e.data.invoice.billingAddress);var a=e.data.invoice.invoiceDate.split("T")[0];je(a);var r=e.data.invoice.dueDate.split("T")[0];se(r)})),o.a.get(I,{headers:{Authorization:"Bearer ".concat(l)}}).then((function(e){B(e.data)})),o.a.get(y,{headers:{Authorization:"Bearer ".concat(l)}}).then((function(e){R(e.data)}))}),[]),Object(u.jsx)(u.Fragment,{children:null===l?Object(u.jsx)(d.a,{to:E}):Object(u.jsxs)("div",{className:"bg-blueGray-100",children:[Object(u.jsxs)("div",{className:"flex justify-between p-3",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)(Q.a,{icon:V.e,color:"#696969",size:"2x"}),Object(u.jsxs)("p",{className:"inline font-bold ml-2 text-gray-800 text-3xl",children:["Invoice"," ","Create"!==i?"#".concat(h.invoiceNumber):null]})]}),Object(u.jsx)(b.b,{to:A,children:Object(u.jsx)(Q.a,{icon:V.k,color:"#696969",size:"2x"})})]}),Je?Object(u.jsx)($,{}):null,Ke?Object(u.jsx)(q,{setShowSuccessModal:Ze,type:"SaveAndClose",message:"Invoice created Successfully"}):at?Object(u.jsx)(L,{setShowErrorModal:rt,type:"CREATE_OR_EDIT_INVOICE_ERROR",message:"An error occured, please check the data filled. This might be due to invalid invoice date or due date OR invoice date and due date may be given before the start date of one or all of the items listed."}):null,Object(u.jsx)("form",{className:"mb-64",children:Object(u.jsxs)("div",{className:"px-5",children:[Object(u.jsxs)("div",{className:"grid xs:grid-cols-1 lg:grid-cols-8",children:[Object(u.jsxs)("div",{className:"col-span-2 lg:mr-3",children:[Object(u.jsx)("label",{htmlFor:"customer",className:"font-bold",children:"Customer"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{list:"customerNames",className:"inline rounded p-2 border border-black xs:w-full",placeholder:"Select a customer",value:_,onChange:function(e){return lt(e,"customerName")},disabled:"View"===i}),Object(u.jsx)("datalist",{id:"customerNames",children:function(){var e=[];if(void 0!==S)for(var t=0;t<S.length;t++)e.push(Object(u.jsx)("option",{value:S[t].displayName})),ct.push(S[t].displayName);return e}()}),Object(u.jsx)("p",{className:"text-red-600",children:Be})]})]}),Object(u.jsxs)("div",{className:"col-span-2",children:[Object(u.jsx)("label",{htmlFor:"customerEmail",className:"font-bold",children:"Customer email"}),Object(u.jsx)("input",{type:"text",className:"block rounded xs:w-full",placeholder:"Enter customer email",value:X,disabled:!0})]}),Object(u.jsx)("div",{className:"col-span-2"}),"View"===i?Object(u.jsxs)("div",{className:"col-span-2 text-right",children:[Object(u.jsx)("span",{className:"text-gray-500 font-bold",children:"PAYMENT STATUS"}),Object(u.jsx)("p",{className:"font-bold text-4xl",children:"PAID"})]}):Object(u.jsxs)("div",{className:"col-span-2 text-right",children:[Object(u.jsx)("span",{className:"text-gray-500 font-bold",children:"BALANCE DUE"}),Object(u.jsxs)("p",{className:"font-bold text-4xl",children:["$",Y.toFixed(2)]})]})]}),Object(u.jsxs)("div",{className:"grid xs:mt-8 lg:mt-16 xs:grid-cols-1 lg:grid-cols-8",children:[Object(u.jsxs)("div",{className:"col-span-2 lg:mr-3",children:[Object(u.jsx)("label",{htmlFor:"billingAddress",className:"font-bold",children:"Billing Address"}),Object(u.jsx)("textarea",{name:"billing",id:"billing",cols:"20",rows:"3",className:"block rounded xs:w-full",value:te,onChange:function(e){return lt(e,"billingAddress")},disabled:!0})]}),Object(u.jsxs)("div",{className:"col-span-1",children:[Object(u.jsx)("label",{htmlFor:"invoiceDate",className:"font-bold",children:"Invoice Date"}),Object(u.jsx)("input",{type:"date",className:"block rounded border",value:ue,onChange:function(e){return lt(e,"invoiceDate")},disabled:"View"===i}),Object(u.jsx)("p",{className:"text-red-600",children:De})]}),Object(u.jsxs)("div",{className:"col-span-1",children:[Object(u.jsx)("label",{htmlFor:"dueDate",className:"font-bold",children:"Due Date"}),Object(u.jsx)("input",{type:"date",className:"block rounded border xs:w-full",value:ne,onChange:function(e){return lt(e,"dueDate")},disabled:"View"===i}),Object(u.jsx)("p",{className:"text-red-600",children:_e})]}),Object(u.jsx)("div",{className:"col-span-2"})]}),Object(u.jsx)("p",{className:"text-red-600",children:Qe}),Object(u.jsxs)("div",{className:"table w-full mt-5 p-4",children:[Object(u.jsxs)("table",{className:"table-auto border-collapse w-full p-4",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"p-3 font-bold uppercase border-r-2 lg:table-cell",children:"#"}),Object(u.jsx)("th",{className:"p-3 font-bold uppercase border-r-2 lg:table-cell",children:"PRODUCT/SERVICE"}),Object(u.jsx)("th",{className:"p-3 font-bold uppercase border-r-2 lg:table-cell",children:"DESCRIPTION"}),Object(u.jsx)("th",{className:"p-3 font-bold uppercase border-r-2 lg:table-cell",children:"QTY"}),Object(u.jsx)("th",{className:"p-3 font-bold uppercase border-r-2 lg:table-cell",children:"RATE"}),Object(u.jsx)("th",{className:"p-3 font-bold uppercase border-r-2 lg:table-cell",children:"AMOUNT"}),Object(u.jsx)("th",{className:"p-3 font-bold uppercase lg:table-cell"})]})}),Object(u.jsx)("tbody",{children:function(e,a){var r=[];function c(e,r,c){a[c]=r,n(a),v(a),t(oe(a))}function l(a){var r=[].concat(Object(he.a)(e.slice(0,a)),Object(he.a)(e.slice(a+1)));v([].concat(Object(he.a)(e.slice(0,a)),Object(he.a)(e.slice(a+1)))),n(r),t(function(e){return{type:ce,payload:e}}(a))}function n(e){var t=0;e.forEach((function(e){t+=e.itemAmount})),Le(null),Oe(t),K(t),"Create"===i&&K(t)}if(void 0!==e)for(var s=0;s<e.length;s++)r.push(Object(u.jsx)(Ne,{invoiceItem:e[s],items:D,operation:i,index:s,updateItemsCallback:c,deleteItemCallback:l},e[s].id));return r}(g,c.currentInvoiceItems)})]}),Object(u.jsx)("p",{className:"text-red-600",children:ze}),"View"===i?null:Object(u.jsx)("button",{title:"Add an item",onClick:function(e){return function(e){e.preventDefault(),c.currentInvoiceItems.push({id:null,itemTableId:null,quantity:null,rate:null,invoiceTableId:null,createdAt:null,updatedAt:null,userId:null,itemName:null,itemDescription:null,itemAmount:null}),v(c.currentInvoiceItems),t(oe(c.currentInvoiceItems))}(e)},children:Object(u.jsx)(Q.a,{icon:V.i,color:"#228B22",size:"2x"})})]}),Object(u.jsx)("table",{className:"float-right font-bold text-xl w-96 text-right",children:Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Total"}),Object(u.jsxs)("td",{children:["$",pe.toFixed(2)]})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Amount Received"}),Object(u.jsxs)("td",{children:["$","View"===i?pe.toFixed(2):we.toFixed(2)]})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Balance due"}),Object(u.jsxs)("td",{children:["$",Y.toFixed(2)]})]})]})})]})}),"View"===i?Object(u.jsx)("div",{className:"bg-gray-800 text-white fixed left-0 bottom-0 justify-between px-2  h-16 w-full",children:Object(u.jsx)(b.b,{to:A,className:"roundedPillBtn bg-green-700 rounded-pill float-right hover:bg-green-500",children:"Close"})}):Object(u.jsxs)("div",{className:"bg-gray-800 text-white fixed left-0 bottom-0 justify-between px-2  h-16 w-full flex flex-row",children:[Object(u.jsx)("div",{id:"footer-left",className:"flex flex-row mb-2",children:Object(u.jsx)(b.b,{to:A,className:"roundedPillBorderedBtn bg-transparent rounded-pill mr-2 hover:bg-white hover:text-black",children:"Cancel"})}),Object(u.jsx)("div",{id:"footer-right",className:"flex flex-row mb-2",children:Object(u.jsx)(b.b,{to:A,className:"roundedPillBtn bg-green-700 rounded-pill hover:bg-green-500",onClick:function(e){return function(e){return st.apply(this,arguments)}(e)},children:"Save and Close"})})]})]})})};var Be=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.localAuthReducer.jwt})),a=localStorage.getItem("session-jwt");a=null!==a?JSON.parse(a):null;var r=!1;return null!==a&&null!==a.value.token&&""!==a.value.token&&a.expiry>(new Date).getTime()?e(h(a.value.token)):null!==a&&a.expiry<(new Date).getTime()&&(r=!0),Object(u.jsx)(b.a,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(d.d,{children:[Object(u.jsx)(d.b,{exact:!0,path:"/",render:function(){return null===t||""===t?Object(u.jsx)(d.a,{to:{pathname:E,state:{isSessionExpired:r}}}):Object(u.jsx)(d.a,{to:B})}}),Object(u.jsx)(d.b,{path:E,exact:!0,component:G}),Object(u.jsx)(d.b,{path:S,exact:!0,component:T}),Object(u.jsx)(d.b,{path:B,exact:!0,component:X}),Object(u.jsx)(d.b,{path:k,exact:!0,component:K}),Object(u.jsx)(d.b,{path:C,exact:!0,component:xe}),Object(u.jsx)(d.b,{path:A,exact:!0,component:ue}),Object(u.jsx)(d.b,{path:D,exact:!0,component:Se}),Object(u.jsx)(d.b,{component:G})]})})})},ke=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,98)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,l=t.getLCP,n=t.getTTFB;a(e),r(e),c(e),l(e),n(e)}))},Ce=a(20),Ae=a(5),De={jwt:null},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(Ae.a)(Object(Ae.a)({},e),{},{jwt:t.payload});default:return e}},Ge={invoices:[],currentInvoice:{},currentInvoiceItems:[]},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return Object(Ae.a)(Object(Ae.a)({},e),{},{invoices:t.payload});case ee:return Object(Ae.a)(Object(Ae.a)({},e),{},{invoices:[]});case te:return Object(Ae.a)(Object(Ae.a)({},e),{},{invoices:[].concat(Object(he.a)(e.invoices.slice(0,t.payload)),Object(he.a)(e.invoices.slice(t.payload+1)))});case ae:return Object(Ae.a)(Object(Ae.a)({},e),{},{currentInvoice:t.payload});case re:return Object(Ae.a)(Object(Ae.a)({},e),{},{currentInvoiceItems:t.payload});case ce:return Object(Ae.a)(Object(Ae.a)({},e),{},{currentInvoiceItems:[].concat(Object(he.a)(e.currentInvoiceItems.slice(0,t.payload)),Object(he.a)(e.currentInvoiceItems.slice(t.payload+1)))});case le:return Object(Ae.a)(Object(Ae.a)({},e),{},{currentInvoice:{}});case ne:return Object(Ae.a)(Object(Ae.a)({},e),{},{currentInvoiceItems:[]});default:return e}},_e={items:[]},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return Object(Ae.a)(Object(Ae.a)({},e),{},{items:t.payload});case me:return Object(Ae.a)(Object(Ae.a)({},e),{},{items:[]});default:return e}},Pe={customers:[]},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(Ae.a)(Object(Ae.a)({},e),{},{customers:t.payload});case Y:return Object(Ae.a)(Object(Ae.a)({},e),{},{customers:[]});default:return e}},Qe=Object(Ce.combineReducers)({localAuthReducer:Re,invoiceReducer:Te,itemReducer:Fe,customerReducer:Ve}),Le=a(42),Me=a.n(Le),qe=a(43),ze=Object(Ce.createStore)(Qe,Object(qe.composeWithDevTools)(Object(Ce.applyMiddleware)(Me.a)));n.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(m.a,{store:ze,children:Object(u.jsx)(Be,{})})}),document.getElementById("root")),ke()}},[[97,1,2]]]);
//# sourceMappingURL=main.f57d7fb4.chunk.js.map